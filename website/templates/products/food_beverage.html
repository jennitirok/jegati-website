{% extends "base.html" %}
{% block content %}

<style>
    .product-heading {
        width: 100%;
        height: relative;
        background-image: url('../../static/background/food.jpg');
        background-size: cover;
        text-align: center;
        color: white;
        padding: 50px 50px;
    }
    @media (max-width: 768px) {
        #next-column {
            padding-top: 20px;
        }
    }
</style>

<!-- Product Header -->
<div class="product-heading">
    <h3>Food & Beverage Product</h3>
</div>

<div class="container-fluid py-1">
    <!-- Search Bar -->
    <div class="search-bar">
        <form action="#" id="search-form">
            <div class="input-group col-md-9 mx-md-auto py-3">
                <input 
                    class="form-control py-2 border-right-0 border" 
                    name="search" 
                    value="" 
                    type="search" 
                    placeholder="Search Food and Beverage Products..." 
                    id="search-products"
                    autocomplete="off"
                >
                <span class="input-group-append">
                    <button class="btn btn-outline-secondary" type="submit">
                        <i class="fa fa-search"></i>
                    </button>
                </span>
            </div>
        </form>
    </div>

    <!-- Product List -->
    <div class="row px-4 py-4 ml-4 mt-3" id="food-list">
        <div class="col-md-4">
            <h4><b>A</b></h4>
            <p title="A">Aloe Vera</p>
            <p title="A">Aspartame</p>
            <br>

            <h4><b>B</b></h4>
            <p title="B">Butylated Hydroxyanisole</p>
            <p title="B">Butylated Hydroxytoluene</p>
            <br>

            <h4><b>C</b></h4>
            <p title="C">Calcium Lactate</p>
            <p title="C">Carragenan</p>
            <p title="C">Castor Sugar</p>
            <p title="C">Cheese Powder</p>
            <p title="C">Citric Acid Mono (Anhy)</p>
            <p title="C">Coconut Cream Powder</p>
            <p title="C">Collagen</p>
            <p title="C">Corn Starch</p>
            <br>

            <h4><b>D</b></h4>
            <p title="D">Dextrose Anhydrous</p>
            <p title="D">Dextrose mono (Anhy)</p>
            <p title="D">Dextrose Monohydrous</p>
            <br>

            <h4><b>E</b></h4>
            <p title="E">EDTA 2 Na (4 Na)</p>
            <p title="E">Egg Powder</p>
            <br>

            <h4><b>F</b></h4>
            <p title="F">Fructose Crystal</p>
        </div>
        <div class="col-md-4" id="next-column">
            <h4><b>G</b></h4>
            <p title="G">Garlic Powder</p>
            <p title="G">Gelatine</p>
            <p title="G">Ginger Powder</p>
            <p title="G">Ginseng Extract</p>
            <p title="G">Glucosamin</p>
            <p title="G">Glycerin USP Grade</p>
            <p title="G">Green Tea</p>
            <br>

            <h4><b>I</b></h4>
            <p title="I">Inositol</p>
            <p title="I">Instant Coffee</p>
            <br>

            <h4><b>L</b></h4>
            <p title="L">Lactose</p>
            <p title="L">Lactulose</p>
            <br>

            <h4><b>M</b></h4>
            <p title="M">Malt Extract (Powder, Liquid)</p>
            <p title="M">Maltodextrin DE 10-15 and 18-20</p>
            <p title="M">Menthol Crystal</p>
            <br>

            <h4><b>N</b></h4>
            <p title="N">NaCl (Salt)</p>
            <p title="N">Natamycin</p>
            <p title="N">Nisin</p>
            <br>

            <h4><b>O</b></h4>
            <p title="O">Olive Oil</p>
        </div>
        <div class="col-md-4" id="next-column">
            <h4><b>P</b></h4>
            <p title="P">Peppermint Oil</p>
            <p title="P">Phosphate (TCP, DAP, etc)</p>
            <p title="P">Potassium Sorbate</p>
            <p title="P">Potassium Sorbate FCC IV</p>
            <p title="P">Propolis Extract</p>
            <br>

            <h4><b>S</b></h4>
            <p title="S">Sesame Oil</p>
            <p title="S">Sodium Benzoate</p>
            <p title="S">Sodium Benzoate BP 2000</p>
            <p title="S">Sorbic Acid</p>
            <p title="S">Spirulina</p>
            <p title="S">Sucralose</p>
            <br>

            <h4><b>V</b></h4>
            <p title="V">Vegetable Oil</p>
            <p title="V">Vitamin A</p>
            <p title="V">Vitamin A, D and E</p>
            <p title="V">Vitamin B3</p>
            <p title="V">Vitamin C</p>
            <p title="V">Vitamin C (Asorbic Acid)</p>
            <p title="V">Vitamin E-Oil</p>
            <br>

            <h4><b>X</b></h4>
            <p title="X">Xantham Gum</p>
            <p title="X">Xylitol</p>
        </div>
    </div>
</div>

<script>
    var textToSearch = "";
    var productList = document.getElementById("food-list").getElementsByTagName('p');
    var productCategory = document.getElementsByTagName("b");

    function search() {
        textToSearch = textToSearch.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
        let pattern = new RegExp(`${textToSearch}`, "gi");
        let selectedCategory = [];

        for (let i = 0; i < productList.length; i++) {
            if (!productList[i].innerHTML.toLowerCase().includes(textToSearch)) {
                productList[i].style.display = "none";
            } else { 
                productList[i].style.display = "";
                let category = productList[i].getAttribute("title");
                if (!selectedCategory.includes(category)) {
                    selectedCategory.push(category);
                }
            }
        }
        
        for (let i = 0; i < productCategory.length; i++) {
            if (!selectedCategory.includes(productCategory[i].textContent))
                productCategory[i].style.display = "none";
            else 
                productCategory[i].style.display = "";
        }
    }

    document.addEventListener('DOMContentLoaded', (event) => {
            document.getElementById("search-form").addEventListener("submit", function(e) {
                textToSearch = document.getElementById("search-products").value;
                textToSearch = textToSearch.toLowerCase();
                if (textToSearch !== "") {
                    e.preventDefault();
                    search();
                } else {
                    for (let i = 0; i < productList.length; i++) {
                        productList[i].style.display = "";
                    }
                    for (let i = 0; i < productCategory.length; i++) {
                        productCategory[i].style.display = "";
                    }
                }
            });
        });
</script>

{% endblock %}